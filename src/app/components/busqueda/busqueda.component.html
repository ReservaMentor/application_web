<app-navbar></app-navbar>

<div class="container">
  <header>
    <input type="text" placeholder="Buscar tópico (ej. RPA)" [(ngModel)]="searchTopic" class="search-bar">
    <input type="date" [(ngModel)]="startDate" class="date-picker">
    <input type="date" [(ngModel)]="endDate" class="date-picker">
    <input type="time" [(ngModel)]="startTime" class="time-picker">
    <input type="time" [(ngModel)]="endTime" class="time-picker">
    <button (click)="onSearch()" class="search-button">Buscar</button>
  </header>

  <aside class="filters">
    <h2>Filtrar por:</h2>
    <div class="filter-section">
      <h3>Categoría</h3>
      <div *ngFor="let category of categories">
        <label>
          <input type="checkbox" (change)="toggleCategory(category)"> {{ category }}
        </label>
      </div>
    </div>
    <div class="filter-section">
      <h3>Calificación</h3>
      <div *ngFor="let rating of [5, 4, 3, 2, 1]">
        <label>
          <input type="checkbox" (change)="toggleRating(rating)"> {{ '★'.repeat(rating) }}
        </label>
      </div>
    </div>
    <div class="filter-section">
      <h3>Precio Máximo</h3>
      <input type="number" [(ngModel)]="maxPrice" (change)="onMaxPriceChange($event)" placeholder="Máximo precio">
    </div>

    <div class="filter-section">
      <h3>Tipo de Sesión</h3>
      <label><input type="checkbox" (change)="toggleSessionType('individual')"> Individual</label><br>
      <label><input type="checkbox" (change)="toggleSessionType('grupal')"> Grupal</label>
    </div>
  </aside>

  <main>
    <div class="expert-header">
      <h1>{{ filteredMentores.length }} Expertos Encontrados</h1>
      <div class="sort-container">
        <select (change)="onSortChange($event)" class="sort-select">
          <option value="">Ordenar por</option>
          <option value="rating-asc">Calificación Ascendente</option>
          <option value="rating-desc">Calificación Descendente</option>
          <option value="students-asc">Estudiantes Ayudados Ascendente</option>
          <option value="students-desc">Estudiantes Ayudados Descendente</option>
          <option value="price-asc">Precio Ascendente</option>
          <option value="price-desc">Precio Descendente</option>
        </select>
      </div>
    </div>
    <div class="expert-list">
      <div *ngFor="let mentor of filteredMentores" class="expert-card">
        <img [src]="mentor.fotoPerfil" [alt]="mentor.nombre">
        <div class="expert-details">
          <h2>{{ mentor.nombre }}</h2>
          <p>{{ mentor.descripcion }}</p>
          <p><strong>Calificación:</strong> {{ mentor.calificacion }}</p>
          <p><strong>Precio por Hora:</strong> S/. {{ mentor.tarifaPorHora }}</p>
          <p><strong>Categorías:</strong> {{ mentor.categorias.join(', ') }}</p>
          <p><strong>Horarios:</strong>
            <span *ngFor="let horario of mentor.horariosDisponibles">
              {{ horario.fecha }} de {{ horario.inicio }} a {{ horario.fin }}
            </span>
          </p>
          <p><strong>Tipo de Sesiones:</strong> {{ mentor.tiposSesiones.join(', ') }}</p>
          <button class="view-more-button">Ver Más</button>
        </div>
      </div>
    </div>
  </main>
</div>

<app-footer></app-footer>
